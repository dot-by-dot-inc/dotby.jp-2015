matrix = require('gl-matrix')
Dot = require('../Dot')
utils = require('../utils.coffee')

module.exports = class Kida

  getDots: (width, height) ->

    coords = [{"x":640,"y":345.52,"r":47.8},{"x":640,"y":275.06,"r":40.29},{"x":548.04,"y":311.11,"r":40.29},{"x":458.78,"y":359.44,"r":40.29},{"x":542.63,"y":399.59,"r":40.29},{"x":640,"y":452,"r":40.14},{"x":640,"y":220.17,"r":32.93},{"x":553.45,"y":248,"r":32.78},{"x":468.25,"y":283.25,"r":32.78},{"x":380.35,"y":328.31,"r":32.78},{"x":289.78,"y":382.38,"r":32.78},{"x":366.78,"y":416.79,"r":32.78},{"x":449.32,"y":460.21,"r":32.63},{"x":537.22,"y":514.29,"r":32.63},{"x":640,"y":577.37,"r":32.63},{"x":640,"y":180,"r":25.42},{"x":558.86,"y":200.51,"r":25.42},{"x":477.72,"y":227.54,"r":25.42},{"x":393.87,"y":262,"r":25.42},{"x":307.32,"y":304.55,"r":25.27},{"x":216.71,"y":355.35,"r":25.27},{"x":126.1,"y":413.52,"r":25.27},{"x":196.42,"y":443.83,"r":25.26},{"x":272.16,"y":482.33,"r":25.27},{"x":354.65,"y":529,"r":25.11},{"x":441.2,"y":584.74,"r":25.11},{"x":533.16,"y":649.46,"r":25.11},{"x":640,"y":722.38,"r":25.11},{"x":640,"y":150.53,"r":17.9},{"x":564.27,"y":165.28,"r":17.91},{"x":487.18,"y":185.76,"r":17.9},{"x":407.39,"y":212,"r":17.9},{"x":324.91,"y":245.57,"r":17.91},{"x":238.35,"y":286.53,"r":17.91},{"x":150.44,"y":334.87,"r":17.75},{"x":61.18,"y":389.76,"r":17.75},{"x":-30.78,"y":451.2,"r":17.75},{"x":32.75,"y":478.24,"r":17.75},{"x":101.76,"y":512.65,"r":17.76},{"x":176.14,"y":553.61,"r":17.6},{"x":255.93,"y":603.59,"r":17.6},{"x":342.48,"y":661.75,"r":17.6},{"x":433.09,"y":728.11,"r":17.6},{"x":529.11,"y":803.49,"r":17.6},{"x":640,"y":885.41,"r":17.45},{"x":640,"y":130.87,"r":11.43},{"x":569.68,"y":140.7,"r":11.44},{"x":496.65,"y":155.45,"r":11.44},{"x":420.92,"y":175.93,"r":11.44},{"x":342.44,"y":202.14,"r":11.44},{"x":259.99,"y":234.1,"r":11.44},{"x":176.14,"y":273.42,"r":11.44},{"x":89.59,"y":319.3,"r":11.44},{"x":1.68,"y":371.73,"r":11.44},{"x":-88.93,"y":429.9,"r":11.43},{"x":-178.19,"y":493.8,"r":11.43},{"x":-122.74,"y":518.38,"r":11.43},{"x":-61.88,"y":549.51,"r":11.44},{"x":5.74,"y":586.38,"r":11.44},{"x":78.77,"y":631.44,"r":11.44},{"x":157.2,"y":683.87,"r":11.43},{"x":241.05,"y":744.5,"r":11.43},{"x":331.66,"y":813.32,"r":11.44},{"x":426.33,"y":890.33,"r":11.44},{"x":525.05,"y":974.71,"r":11.44},{"x":640,"y":1065.65,"r":11.43},{"x":640,"y":116.94,"r":11.43},{"x":573.74,"y":124.31,"r":11.44},{"x":504.77,"y":135,"r":11.44},{"x":433.09,"y":149.71,"r":11.44},{"x":358.71,"y":170.19,"r":11.44},{"x":280.27,"y":195.59,"r":11.44},{"x":200.44,"y":226.72,"r":11.44},{"x":117.99,"y":264.41,"r":11.44},{"x":32.79,"y":307.83,"r":11.44},{"x":-53.76,"y":357.81,"r":11.44},{"x":-141.67,"y":413.52,"r":11.44},{"x":-229.57,"y":474.14,"r":11.43},{"x":-318.84,"y":538.86,"r":11.43},{"x":-270.15,"y":562.62,"r":11.43},{"x":-216.05,"y":591.3,"r":11.44},{"x":-156.56,"y":625.71,"r":11.44},{"x":-91.64,"y":666.67,"r":11.43},{"x":-21.31,"y":714.19,"r":11.44},{"x":55.78,"y":769.9,"r":11.44},{"x":138.27,"y":833,"r":11.44},{"x":227.53,"y":905.08,"r":11.44},{"x":320.84,"y":983.72,"r":11.43},{"x":419.57,"y":1069.75,"r":11.44},{"x":520.99,"y":1162.32,"r":11.43},{"x":640,"y":1261.46,"r":11.43},{"x":640,"y":107.11,"r":11.43},{"x":577.79,"y":112.84,"r":11.43},{"x":512.88,"y":120.22,"r":11.44},{"x":445.26,"y":131.69,"r":11.44},{"x":374.94,"y":147.25,"r":11.44},{"x":300.56,"y":166.92,"r":11.44},{"x":223.44,"y":192.31,"r":11.44},{"x":145.03,"y":222.63,"r":11.43},{"x":63.89,"y":258.67,"r":11.44},{"x":-19.95,"y":300.46,"r":11.44},{"x":-103.81,"y":348,"r":11.43},{"x":-189,"y":400.41,"r":11.44},{"x":-275.56,"y":457.76,"r":11.44},{"x":-363.46,"y":520,"r":11.44},{"x":-450.02,"y":585.56,"r":11.43},{"x":-408.09,"y":608.5,"r":11.44},{"x":-360.75,"y":635.54,"r":11.44},{"x":-309.36,"y":668.31,"r":11.44},{"x":-252.57,"y":706,"r":11.43},{"x":-189.01,"y":750.23,"r":11.43},{"x":-120.03,"y":801.85,"r":11.44},{"x":-45.65,"y":860,"r":11.44},{"x":35.49,"y":926.38,"r":11.44},{"x":122.04,"y":1000.93,"r":11.43},{"x":214,"y":1082,"r":11.43},{"x":311.38,"y":1169.7,"r":11.44},{"x":412.8,"y":1264.73,"r":11.43},{"x":495.41,"y":1365.5,"r":11.44}, {"x":731.96,"y":311.11,"r":40.29},{"x":821.22,"y":359.44,"r":40.29}, {"x":737.37,"y":399.59,"r":40.29},{"x":726.55,"y":248,"r":32.78},{"x":811.75,"y":283.25,"r":32.78},{"x":899.65,"y":328.31,"r":32.78},{"x":990.22,"y":382.38,"r":32.78},{"x":913.22,"y":416.79,"r":32.78},{"x":830.68,"y":460.21,"r":32.63},{"x":742.78,"y":514.29,"r":32.63}, {"x":721.14,"y":200.51,"r":25.42},{"x":802.28,"y":227.54,"r":25.42},{"x":886.13,"y":262,"r":25.42},{"x":972.73,"y":304.55,"r":25.27},{"x":1063.29,"y":355.35,"r":25.27},{"x":1153.9,"y":413.52,"r":25.27},{"x":1083.58,"y":443.83,"r":25.26},{"x":1007.84,"y":482.33,"r":25.27},{"x":925.35,"y":529,"r":25.11},{"x":838.8,"y":584.74,"r":25.11},{"x":746.89,"y":649.46,"r":25.11},{"x":715.73,"y":165.28,"r":17.91},{"x":792.82,"y":185.76,"r":17.9},{"x":872.61,"y":212,"r":17.9},{"x":955.09,"y":245.57,"r":17.91},{"x":1041.65,"y":286.53,"r":17.91},{"x":1129.56,"y":334.87,"r":17.75},{"x":1218.82,"y":389.76,"r":17.75},{"x":1310.78,"y":451.2,"r":17.75},{"x":1247.25,"y":478.24,"r":17.75},{"x":1178.24,"y":512.65,"r":17.76},{"x":1103.86,"y":553.61,"r":17.6}, {"x":1024.07,"y":603.59,"r":17.6},{"x":937.52,"y":661.75,"r":17.6},{"x":846.91,"y":728.11,"r":17.6},{"x":750.89,"y":803.49,"r":17.6},{"x":710.32,"y":140.7,"r":11.44},{"x":783.35,"y":155.45,"r":11.44},{"x":859.08,"y":175.93,"r":11.44},{"x":937.56,"y":202.14,"r":11.44},{"x":1020.01,"y":234.1,"r":11.44},{"x":1103.86,"y":273.42,"r":11.44}, {"x":1190.41,"y":319.3,"r":11.44},{"x":1278.32,"y":371.73,"r":11.44},{"x":1368.93,"y":429.9,"r":11.43},{"x":1458.19,"y":493.8,"r":11.43},{"x":1402.74,"y":518.38,"r":11.43},{"x":1341.88,"y":549.51,"r":11.44},{"x":1274.26,"y":586.38,"r":11.44},{"x":1201.23,"y":631.44,"r":11.44},{"x":1122.8,"y":683.87,"r":11.43},{"x":1038.95,"y":744.5,"r":11.43},{"x":948.34,"y":813.32,"r":11.44},{"x":853.67,"y":890.33,"r":11.44},{"x":754.95,"y":974.71,"r":11.44},{"x":706.26,"y":124.31,"r":11.44},{"x":775.23,"y":135,"r":11.44},{"x":846.91,"y":149.71,"r":11.44},{"x":921.29,"y":170.19,"r":11.44},{"x":999.73,"y":195.59,"r":11.44},{"x":1079.56,"y":226.72,"r":11.44},{"x":1162.01,"y":264.41,"r":11.44},{"x":1247.21,"y":307.83,"r":11.44},{"x":1333.77,"y":357.81,"r":11.43},{"x":1421.67,"y":413.52,"r":11.44},{"x":1509.57,"y":474.14,"r":11.43},{"x":1598.83,"y":538.86,"r":11.44},{"x":1550.15,"y":562.62,"r":11.43},{"x":1496.05,"y":591.3,"r":11.44},{"x":1436.57,"y":625.71,"r":11.43},{"x":1371.63,"y":666.67,"r":11.44},{"x":1301.31,"y":714.19,"r":11.44},{"x":1224.22,"y":769.9,"r":11.44},{"x":1141.73,"y":833,"r":11.44},{"x":1052.47,"y":905.08,"r":11.44},{"x":959.16,"y":983.72,"r":11.43},{"x":860.43,"y":1069.75,"r":11.44},{"x":759.01,"y":1162.32,"r":11.43},{"x":702.21,"y":112.84,"r":11.43},{"x":767.12,"y":120.22,"r":11.44},{"x":834.74,"y":131.69,"r":11.44},{"x":905.06,"y":147.25,"r":11.44},{"x":979.44,"y":166.92,"r":11.44},{"x":1056.56,"y":192.31,"r":11.44},{"x":1134.97,"y":222.63,"r":11.43},{"x":1216.11,"y":258.67,"r":11.44},{"x":1299.96,"y":300.46,"r":11.43},{"x":1383.8,"y":348,"r":11.44},{"x":1469,"y":400.41,"r":11.44},{"x":1555.57,"y":457.76,"r":11.43},{"x":1643.46,"y":520,"r":11.44},{"x":1730.01,"y":585.56,"r":11.44},{"x":1688.09,"y":608.5,"r":11.44},{"x":1640.76,"y":635.54,"r":11.43},{"x":1589.37,"y":668.31,"r":11.43},{"x":1532.57,"y":706,"r":11.43},{"x":1469,"y":750.23,"r":11.44},{"x":1400.03,"y":801.85,"r":11.44},{"x":1325.65,"y":860,"r":11.44},{"x":1244.56,"y":926.38,"r":11.44}, {"x":1157.96,"y":1000.93,"r":11.43},{"x":1066,"y":1082,"r":11.43},{"x":968.62,"y":1169.7,"r":11.44},{"x":867.2,"y":1264.73,"r":11.43},{"x":761.71,"y":1365.5,"r":11.44},{"x":617.14,"y":1470.37,"r":11.43}]
    d = Math.min(width, 800) 
    dd = Math.min(1.4, width / 800)

    scale = dd * utils.rnr(0.7, 1.0) 
    xoffset = utils.rnr(0.9,1.1)
    yoffset = utils.rnr(0.5,0.9)
    @dots = []
    for coord in coords
      x = (coord.x - 640) * scale + width * 0.5 * xoffset
      y = (coord.y - 345) * scale + height * 0.5 * yoffset
      r = coord.r * scale * 0.95
      
      @dots.push(new Dot(x,y,r))

    a = Math.random() * Math.PI * 2
    s = Math.max(width, height, 800) * 0.0002
    @vx = Math.cos(a) * s
    @vy = Math.sin(a) * s

    return @dots


  animate: ->
    for dot in @dots
      dot.x += @vx
      dot.y += @vy
